-- DROP SECTION

DROP TABLE PROFESOR CASCADE CONSTRAINTS;
DROP TABLE HORARIO_PROFESOR CASCADE CONSTRAINTS;
DROP TABLE ASIGNATURA CASCADE CONSTRAINTS;
DROP TABLE CURSO CASCADE CONSTRAINTS;
DROP TABLE PROMEDIO_FINAL_ALUMNO CASCADE CONSTRAINTS;
DROP TABLE ALUMNO CASCADE CONSTRAINTS;
DROP TABLE PROMEDIO_ASIG_ALUMNO CASCADE CONSTRAINTS;


-- CREATE SECTION

CREATE TABLE PROFESOR (
    COD_PROFESOR NUMBER(5) GENERATED ALWAYS AS IDENTITY
    MINVALUE 5
    MAXVALUE 99999
    START WITH 5
    INCREMENT BY 5,
    NUMRUT_PROFESOR NUMBER(10) NOT NULL,
    DVRUT_PROFESOR VARCHAR2(1 BYTE) NOT NULL,
    PNOMBRE_PROFESOR VARCHAR2(25 BYTE) NOT NULL,
    SNOMBRE_PROFESOR VARCHAR2(25 BYTE),
    APPAT_PROFESOR VARCHAR2(25 BYTE) NOT NULL,
    APMAT_PROFESOR VARCHAR2(25 BYTE) NOT NULL,
    SUELDO_PROFESOR NUMBER(7) NOT NULL,
    CONSTRAINT PK_PROFESOR PRIMARY KEY (COD_PROFESOR)
);

CREATE TABLE ASIGNATURA (
    COD_ASIGNATURA NUMBER(4) NOT NULL,
    SIGLA_ASIGNATURA VARCHAR2(10 BYTE) NOT NULL,
    NOMBRE VARCHAR2(30 BYTE) NOT NULL,
    OBSERVACION VARCHAR2(30 BYTE) NOT NULL,
    PORC_ASIST_MINIMA NUMBER(3) NOT NULL,
    MINIMO_DE_NOTAS NUMBER(3) NOT NULL,
    HORAS_SEMANALES NUMBER(3) NOT NULL,
    CONSTRAINT PK_ASIGNATURA PRIMARY KEY (COD_ASIGNATURA)
);

CREATE TABLE CURSO (
    COD_CURSO NUMBER(5) NOT NULL,
    SIGLA_CURSO VARCHAR2(10 BYTE) NOT NULL,
    DESCRIPCION VARCHAR2(25 BYTE) NOT NULL,
    CONSTRAINT PK_CURSO PRIMARY KEY (COD_CURSO)
);

CREATE TABLE ALUMNO(
    COD_ALUMNO NUMBER(5) NOT NULL,
    NUMRUT_ALUMNO NUMBER(10) NOT NULL,
    DVRUT_ALUMNO VARCHAR2(1 BYTE) NOT NULL,
    PNOMBRE_ALUMNO VARCHAR2(25 BYTE) NOT NULL,
    SNOMBRE_ALUMNO VARCHAR2(25 BYTE),
    APPAT_ALUMNO VARCHAR2(25 BYTE) NOT NULL,
    APMAT_ALUMNO VARCHAR2(25 BYTE) NOT NULL,
    BECADO VARCHAR2(1 BYTE),
    COD_CURSO NUMBER(5) NOT NULL,
    CONSTRAINT PK_ALUMNO PRIMARY KEY (COD_ALUMNO),
    CONSTRAINT FK_CURSO_ALUMNO FOREIGN KEY (COD_CURSO) REFERENCES CURSO(COD_CURSO)
);

CREATE TABLE PROMEDIO_ASIG_ALUMNO (
    COD_ALUMNO NUMBER(5) NOT NULL,
    COD_ASIGNATURA NUMBER(4) NOT NULL,
    PROMEDIO_ASIG NUMBER(2,1),
    SITUACION_ASIG VARCHAR2(1 BYTE) NOT NULL,
    CONSTRAINT PK_PROM_ASIG_ALUMNO PRIMARY KEY (COD_ALUMNO, COD_ASIGNATURA),
    CONSTRAINT FK_ALUMNO_PROM_ASIG FOREIGN KEY (COD_ALUMNO) REFERENCES ALUMNO(COD_ALUMNO),
    CONSTRAINT FK_ASIGN_PROM_ASIG FOREIGN KEY (COD_ASIGNATURA) REFERENCES ASIGNATURA(COD_ASIGNATURA)
);

CREATE TABLE PROMEDIO_FINAL_ALUMNO (
    COD_ALUMNO NUMBER(5) NOT NULL,
    COD_CURSO NUMBER(5) NOT NULL,
    PROMEDIO_FINAL NUMBER(2,1),
    SITUACION_FINAL VARCHAR2(1 BYTE) NOT NULL,
    CONSTRAINT PK_PROM_FINAL_ALUMNO PRIMARY KEY (COD_ALUMNO, COD_CURSO),
    CONSTRAINT FK_PROM_FIN_AL_ALUMN FOREIGN KEY (COD_ALUMNO) REFERENCES ALUMNO(COD_ALUMNO),
    CONSTRAINT FK_PROM_FIN_AL_CURSO FOREIGN KEY (COD_CURSO) REFERENCES CURSO(COD_CURSO)
);

CREATE TABLE HORARIO_PROFESOR (
    COD_PROFESOR NUMBER(5) NOT NULL,
    COD_ASIGNATURA NUMBER(4) NOT NULL,
    COD_CURSO NUMBER(5) NOT NULL,
    DIA_SEMANA VARCHAR2(10 BYTE) NOT NULL,
    HORA_INICIO VARCHAR2(5 BYTE) NOT NULL,
    HORA_TERMINO VARCHAR2(5 BYTE) NOT NULL,
    CONSTRAINT PK_HORARIO_PROFESOR PRIMARY KEY (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA),
    CONSTRAINT FK_HORARIO_PROFESOR FOREIGN KEY (COD_PROFESOR) REFERENCES PROFESOR(COD_PROFESOR),
    CONSTRAINT FK_HORARIO_ASIGNATURA FOREIGN KEY (COD_ASIGNATURA) REFERENCES ASIGNATURA(COD_ASIGNATURA),
    CONSTRAINT FK_HORARIO_CURSO FOREIGN KEY (COD_CURSO) REFERENCES CURSO(COD_CURSO)
);


-- INSERT SECTION

INSERT INTO CURSO (COD_CURSO, SIGLA_CURSO, DESCRIPCION)
VALUES            ('211', 'PMA', 'PRIMERO MEDIO A');
INSERT INTO CURSO (COD_CURSO, SIGLA_CURSO, DESCRIPCION)
VALUES            ('212', 'PMB', 'PRIMERO MEDIO B');
INSERT INTO CURSO (COD_CURSO, SIGLA_CURSO, DESCRIPCION)
VALUES            ('221', 'SMA', 'SEGUNDO MEDIO A');
INSERT INTO CURSO (COD_CURSO, SIGLA_CURSO, DESCRIPCION)
VALUES            ('222', 'SMB', 'SEGUNDO MEDIO B');

INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('1211','MATEM','MATEMATICAS','ASIG. PRIMERO MEDIO','90','5','10');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('1212','LENG','LENGUAJE','ASIG. PRIMERO MEDIO','90','5','10');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('1213','ING','INGLES','ASIG. PRIMERO MEDIO','70','4','8');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('1214','ED.FIS','EDUCACION FISICA','ASIG. PRIMERO MEDIO','70','4','7');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('1215','FIS','FISICA','ASIG. PRIMERO MEDIO','66','4','5');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('2211','MATEM2','MATEMATICAS 2','ASIG. SEGUNDO MEDIO','90','5','10');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('2212','LENG2','LENGUAJE 2','ASIG. SEGUNDO MEDIO','90','5','10');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('2213','ING2','INGLES 2','ASIG. SEGUNDO MEDIO','70','4','8');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('2214','ED.FIS2','EDUCACION FISICA 2','ASIG. SEGUNDO MEDIO','70','4','7');
INSERT INTO ASIGNATURA (COD_ASIGNATURA, SIGLA_ASIGNATURA, NOMBRE, OBSERVACION, PORC_ASIST_MINIMA, MINIMO_DE_NOTAS,HORAS_SEMANALES)
VALUES            ('2215','FIS2','FISICA 2','ASIG. SEGUNDO MEDIO','66','4','5');

INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, SNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, BECADO, COD_CURSO)
VALUES            ('2111', '18012987', '1', 'JUAN', 'PABLO', 'ZARATE', 'POBLETE', 'S', '211');
INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, BECADO, COD_CURSO)
VALUES            ('2112', '19983767', 'K', 'MARIA', 'JARA', 'SOTO', 'S', '211');
INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, SNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, BECADO, COD_CURSO)
VALUES            ('2113', '19243861', '8', 'SONIA', 'ISABEL', 'TOLEDO', 'MUÑOZ', 'S', '211');
INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, SNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, COD_CURSO)
VALUES            ('2114', '20997232', '7', 'SERGIO', 'RAFAEL', 'ARAVENA', 'ARAYA', '211');
INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, COD_CURSO)
VALUES            ('2211', '18777666', '6', 'FRANCISCA', 'PEÑA', 'ACEVEDO', '221');
INSERT INTO ALUMNO (COD_ALUMNO, NUMRUT_ALUMNO, DVRUT_ALUMNO, PNOMBRE_ALUMNO, SNOMBRE_ALUMNO, APPAT_ALUMNO, APMAT_ALUMNO, BECADO, COD_CURSO)
VALUES            ('2221', '18998111', '1', 'FRANCISCO', 'JAVIER', 'ZARATE', 'DONOSO', 'S', '222');

INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('13097654','0','JUAN','FRANCISCO','TOLEDO','SEGURA','250000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('14765234','K','SOFIA','GODOY','ARAVENA','250000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('12876345','3','PABLO','ALEJANDRO','FIGUEROA','RUBILAR','200000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('12934666','9','MARIANA','ISABEL','SAMPAOLI','BIELSA','200000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('15436789','K','MARIANA','ISABEL','SAMPAOLI','BIELSA','200000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('14234987','5','JUAN','ENRIQUE','PERALTA','CINFUEGOS','200000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('13098567','3','FRANCISCO','GUSTAVO','MALDONADO','MUJICA','230000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,SNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('13476958','8','CLAUDIO','MAURICIO','SOLAR','RIFFO','200000');
INSERT INTO PROFESOR (NUMRUT_PROFESOR,DVRUT_PROFESOR,PNOMBRE_PROFESOR,APPAT_PROFESOR,APMAT_PROFESOR,SUELDO_PROFESOR)
VALUES            ('14567890','2','MARCELA','ULLOA','HERRERA','185000');

INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2111','1211','4,5','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2111','1212','4,5','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2111','1213','4','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2111','1214','4,3','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2111','1215','3,6','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2112','1211','6,9','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2112','1212','6,7','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2112','1213','7','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2112','1214','6,6','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2112','1215','6,8','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2113','1211','7','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2113','1212','7','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2113','1213','3,9','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2113','1214','3,9','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2113','1215','3,8','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2114','1211','4,4','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2114','1212','4','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2114','1213','4,9','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2114','1214','4,8','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2114','1215','3,9','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2211','2211','6,1','A');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2211','2212','4,4','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2211','2213','3,6','R');
INSERT INTO PROMEDIO_ASIG_ALUMNO (COD_ALUMNO,COD_ASIGNATURA,PROMEDIO_ASIG,SITUACION_ASIG)
VALUES              ('2211','2214','4','R');

INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('5', '1211', '211', 'LUNES', '08:00', '10:15');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('5', '1211', '211', 'MARTES', '08:00', '10:15');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('5', '1211', '211', 'JUEVES', '08:00', '09:30');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('5', '1211', '211', 'VIERNES', '08:00', '09:30');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('10', '1212', '211', 'LUNES', '10:30', '12:45');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('10', '1212', '211', 'MARTES', '10:30', '12:45');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('10', '1212', '211', 'JUEVES', '10:30', '12:00');
INSERT INTO HORARIO_PROFESOR (COD_PROFESOR, COD_ASIGNATURA, COD_CURSO, DIA_SEMANA, HORA_INICIO, HORA_TERMINO)
VALUES              ('10', '1212', '211', 'VIERNES', '10:30', '12:00');